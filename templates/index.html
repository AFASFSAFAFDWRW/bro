<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°—É–¥–µ–±–Ω—ã–π –ü–æ—Ä—Ç–∞–ª | –ö–∞–Ω—Ü–µ–ª—è—Ä–∏—è</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #eef2f7; margin: 0; color: #2c3e50; }
        .nav { background: #1a237e; color: #fff; padding: 15px 50px; display: flex; justify-content: space-between; align-items: center; border-bottom: 4px solid #c5a059; }
        .container { max-width: 1000px; margin: 30px auto; padding: 0 20px; }
        .card { background: white; border-radius: 12px; padding: 25px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); margin-bottom: 25px; position: relative; overflow: hidden; }
        
        /* –°—Ç–∞—Ç—É—Å—ã-–ø–æ–ª–æ—Å–∫–∏ */
        .status-–ù–æ–≤—ã–π { border-left: 8px solid #c5a059; }
        .status-–í-—Ä–∞–±–æ—Ç–µ { border-left: 8px solid #3498db; }
        .status-–ó–∞–≤–µ—Ä—à–µ–Ω { border-left: 8px solid #27ae60; }

        .btn { background: #1a237e; color: white; padding: 12px 25px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; text-decoration: none; display: inline-block; transition: 0.3s; }
        .btn:hover { background: #283593; opacity: 0.9; }
        .btn-sm { padding: 6px 12px; font-size: 0.85em; }
        .btn-danger { background: #c0392b; }
        .btn-success { background: #27ae60; }
        
        .search-box { width: 100%; padding: 15px; border-radius: 10px; border: 2px solid #c5a059; margin-bottom: 20px; font-size: 1.1em; outline: none; box-sizing: border-box; }
        .case-badge { background: #c5a059; color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.85em; margin-right: 10px; font-weight: bold; }
        
        label { display: block; margin-top: 15px; font-weight: bold; font-size: 0.9em; color: #555; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 1em; }
        
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .judge-info { font-size: 0.85em; color: #1a237e; background: #f0f4f8; padding: 15px; border-radius: 6px; margin-top: 15px; border: 1px dashed #1a237e; }
        .status-label { float: right; font-weight: bold; text-transform: uppercase; font-size: 0.75em; padding: 4px 10px; border-radius: 4px; background: #eee; }
        
        hr { border: none; border-top: 1px solid #eee; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="nav">
        <h2>‚öñÔ∏è –°–£–î–ï–ë–ù–ê–Ø –°–ò–°–¢–ï–ú–ê</h2>
        <div><strong>{{ user.username }}</strong> ({{ user.role }}) | <a href="/logout" style="color: gold; text-decoration: none;">–í—ã—Ö–æ–¥</a></div>
    </div>

    <div class="container">
        <input type="text" id="caseSearch" class="search-box" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –¥–µ–ª–∞, –§–ò–û –∏–ª–∏ —Ç–∏–ø—É –∏—Å–∫–∞...">

        <div class="card">
            <h3 style="margin-top: 0; color: #1a237e;">üìÑ –ü–æ–¥–∞—á–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∏—Å–∫–æ–≤–æ–≥–æ –∑–∞—è–≤–ª–µ–Ω–∏—è</h3>
            <p style="font-size: 0.85em; color: #666;">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –±–ª–∞–Ω–∫–∞ –ê4 –≤ —Å–∏—Å—Ç–µ–º–µ.</p>
            
            <form action="/create_case" method="post">
                <div class="form-grid">
                    <div>
                        <label>–û—Ä–≥–∞–Ω —Å—É–¥–µ–±–Ω–æ–π –≤–ª–∞—Å—Ç–∏:</label>
                        <select name="court_name" required>
                            <option>–í–µ—Ä—Ö–æ–≤–Ω—ã–π —Å—É–¥</option>
                            <option>–ö–∞—Å—Å–∞—Ü–∏–æ–Ω–Ω—ã–π –°—É–¥</option>
                            <option>–°—É–¥ –ø–æ –£–≥–æ–ª–æ–≤–Ω—ã–º –∏ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–º –¥–µ–ª–∞–º</option>
                            <option>–°—É–¥ –ø–æ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–º –¥–µ–ª–∞–º</option>
                        </select>
                    </div>
                    <div>
                        <label>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞:</label>
                        <select name="process_type" required>
                            <option>–æ —Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω–∏–∏ –±—Ä–∞–∫–∞ (—Ä–∞–∑–≤–æ–¥)</option>
                            <option>–æ –ø—Ä–∏–∑–Ω–∞–Ω–∏–∏ –±—Ä–∞–∫–∞ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º</option>
                            <option>–æ –≤–∑—ã—Å–∫–∞–Ω–∏–∏ –∞–ª–∏–º–µ–Ω—Ç–æ–≤</option>
                            <option>–æ–± —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –æ—Ç—Ü–æ–≤—Å—Ç–≤–∞</option>
                            <option>–æ –ª–∏—à–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∞–≤</option>
                            <option>–æ —Ä–∞–∑–¥–µ–ª–µ –∏–º—É—â–µ—Å—Ç–≤–∞</option>
                            <option>–æ –ø—Ä–∏–∑–Ω–∞–Ω–∏–∏ –ø—Ä–∞–≤–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏</option>
                            <option>–æ –≤—ã—Å–µ–ª–µ–Ω–∏–∏</option>
                            <option>–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–∞ —Ä–∞–±–æ—Ç–µ</option>
                            <option>–æ –≤–æ–∑–º–µ—â–µ–Ω–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–≥–æ —É—â–µ—Ä–±–∞</option>
                            <option>–æ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ –º–æ—Ä–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–¥–∞</option>
                            <option>–æ–± –æ—Å–ø–∞—Ä–∏–≤–∞–Ω–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π –æ—Ä–≥–∞–Ω–∞ –≤–ª–∞—Å—Ç–∏</option>
                            <option>–æ –≤–∑—ã—Å–∫–∞–Ω–∏–∏ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏</option>
                        </select>
                    </div>
                </div>

                <hr>

                <div class="form-grid">
                    <div>
                        <label>–î–∞–Ω–Ω—ã–µ –ò—Å—Ç—Ü–∞ (–§–ò–û):</label>
                        <input type="text" name="plaintiff_fio" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á" required>
                    </div>
                    <div>
                        <label>–î–∞–Ω–Ω—ã–µ –û—Ç–≤–µ—Ç—á–∏–∫–∞ (–§–ò–û/–û—Ä–≥–∞–Ω):</label>
                        <input type="text" name="defendant_fio" placeholder="–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á" required>
                    </div>
                </div>

                <div class="form-grid">
                    <div>
                        <label>–ê–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</label>
                        <input type="text" name="plaintiff_address" placeholder="–≥. –õ–æ—Å-–°–∞–Ω—Ç–æ—Å, —É–ª. –ú–∏—Ä–∞, –¥. 1" required>
                    </div>
                    <div>
                        <label>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω:</label>
                        <input type="text" name="plaintiff_phone" placeholder="555-000" required>
                    </div>
                </div>

                <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±—Ä–∞—â–µ–Ω–∏—è:</label>
                <input type="text" name="title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò—Å–∫–æ–≤–æ–µ –∑–∞—è–≤–ª–µ–Ω–∏–µ –ø–æ —Ñ–∞–∫—Ç—É –Ω–µ–∑–∞–∫–æ–Ω–Ω–æ–≥–æ —É–≤–æ–ª—å–Ω–µ–Ω–∏—è" required>

                <label>–°—É—Ç—å –∑–∞—è–≤–ª–µ–Ω–∏—è (–¢–µ–∫—Å—Ç –¥–ª—è –±–ª–∞–Ω–∫–∞ –ê4):</label>
                <textarea name="content" rows="6" placeholder="–ò–∑–ª–æ–∂–∏—Ç–µ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞ –¥–µ–ª–∞ –∏ –≤–∞—à–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è..." required></textarea>

                <button type="submit" class="btn" style="width: 100%; margin-top: 10px; background: #c5a059;">‚öñÔ∏è –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –∫–∞–Ω—Ü–µ–ª—è—Ä–∏—é</button>
            </form>
        </div>

        <div id="casesList">
            <h3 style="color: #1a237e;">üìÅ –†–µ–µ—Å—Ç—Ä —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª</h3>
            {% for case in cases %}
            <div class="card case-card status-{{ case.status|replace(' ', '-') }}">
                <span class="status-label">{{ case.status }}</span>
                <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div>
                        <span class="case-badge">{{ case.case_num }}</span>
                        <strong style="font-size: 1.1em;">{{ case.title }}</strong>
                        <div style="margin-top: 5px; font-size: 0.85em; color: #666;">
                            <span>üèõ {{ case.court_name }}</span> | 
                            <span>üë§ –ò—Å—Ç–µ—Ü: {{ case.plaintiff_fio }}</span>
                        </div>
                    </div>
                    {% if user.role != '–ì—Ä–∞–∂–¥–∞–Ω–∏–Ω' %}
                    <a href="/delete_case/{{ case.id }}" class="btn btn-sm btn-danger" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –¥–µ–ª–æ –∏–∑ –∞—Ä—Ö–∏–≤–∞?')">–£–¥–∞–ª–∏—Ç—å</a>
                    {% endif %}
                </div>

                <div style="margin: 15px 0; padding: 10px; background: #fafafa; border-radius: 6px; font-size: 0.95em; white-space: pre-wrap;">{{ case.content }}</div>

                {% if case.judge_id %}
                    <div class="judge-info">
                        <strong>üë®‚Äç‚öñÔ∏è –°—É–¥—å—è –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ:</strong> {{ case.judge_id }}
                        {% if case.result %}
                            <hr>
                            <p><strong>‚öñÔ∏è –ò–¢–û–ì–û–í–´–ô –í–ï–†–î–ò–ö–¢:</strong></p>
                            <div style="font-style: italic;">{{ case.result }}</div>
                        {% elif user.username == case.judge_id %}
                            <form action="/answer_case/{{ case.id }}" method="post" style="margin-top: 10px;">
                                <textarea name="result" rows="3" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å—É–¥–µ–±–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è / –≤–µ—Ä–¥–∏–∫—Ç–∞..." required></textarea>
                                <button type="submit" class="btn btn-sm btn-success">‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤–µ—Ä–¥–∏–∫—Ç</button>
                            </form>
                        {% endif %}
                    </div>
                {% elif user.role != '–ì—Ä–∞–∂–¥–∞–Ω–∏–Ω' %}
                    <div style="text-align: right;">
                        <a href="/take_case/{{ case.id }}" class="btn btn-sm" style="background: #3498db;">–ü—Ä–∏–Ω—è—Ç—å –∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É</a>
                    </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>

    <script>
        // –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
        document.getElementById('caseSearch').addEventListener('keyup', function() {
            let filter = this.value.toLowerCase();
            let cards = document.getElementsByClassName('case-card');
            for (let card of cards) {
                let content = card.innerText.toLowerCase();
                card.style.display = content.includes(filter) ? "" : "none";
            }
        });
    </script>
</body>
</html>
